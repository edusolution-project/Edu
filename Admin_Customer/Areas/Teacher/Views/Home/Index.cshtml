@{
    ViewData["Title"] = "Dashboard - Ngày " +  DateTime.Now.Day.ToString("D2") + " tháng " + DateTime.Now.Month.ToString("D2")  + " năm " + DateTime.Now.Year.ToString("D2");
    Layout = "~/Views/Shared/_LayoutTeacher.cshtml";
}

<div class="left-col">
    <div class="page-title">
        <h1>@ViewData["Title"]</h1>
    </div>
    <div class="main-container">
        <div class="card-content course-box" id="myclassWrapper">
        </div>
    </div>
</div>
<script>
    activeTab = "dashboard";
</script>
<!-- Begin Page Content -->
@*<div class="container">
    <div class="row">
        <div class="col-lg-6 mb-4">
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <a href="@Url.Action("Index", "Class" )"><h6 class="m-0 font-weight-bold text-primary">Lớp của tôi</h6></a>
                </div>
                <div class="card-body">
                    <div class="card-content" id="myclassWrapper">
                    </div>
                    <div class="float-right">
                        <a href="@Url.Action("Index", "Class" )"> Xem tất cả</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-6 mb-4">
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">Bài giảng hôm nay</h6>
                </div>
                <div class="card-body">
                    <table id="tbTodayLesson" class="table table-bordered mb-0" width="100%" cellspacing="0">
                        <tbody></tbody>
                    </table>
                    <div class="float-right">
                        <a href="@Url.Action("Schedule","Class")"> Xem tất cả</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>*@
<!-- End of Main Content -->
<script>
    function LoadMyClass() {
        $.ajax({
            type: "POST",
            url: '@Url.Action("GetActiveList", "Class")',
            data: { },
            dataType:"json",
            success: function (data) {
                var body = $('#myclassWrapper');
                body.html("");
                if (data.Data.length > 0)
                {
                    for (i = 0; i < data.Data.length; ++i) {
                        item = data.Data[i];


                        body.append("<a href=\"@Url.Action("Detail", "Class")/" + item.ID + "\">" +
                                        "<div class='course-item' " + (item.Image == null ? "" : "style='background-image:url(\"" + item.Image + "\")'")  + ">" +
                                        "<div class='course-info'>" +
                                            "<h3>" + item.Name + "</h3>" +
                                            "<h4><div class=\"progress-bar\" role=\"progressbar\" style=\"width: " + item.Progress + "%;height:24px;\" aria-valuenow=\"" + item.Progress + "\" aria-valuemin=\"0\" aria-valuemax=\"100\">" + item.Progress + "%</div></h4>" +
                                            "<div class='action-wrapper'>" +
                                                "<a class='actionlink announcement' href='@Url.Action("News", "Course")/" + item.ID + "'></a>" +
                                                "<a class='actionlink assignment' href='@Url.Action("Assignment", "Course")/" + item.ID + "'></a>" +
                                                "<a class='actionlink comment' href='@Url.Action("Comments", "Course")/" + item.ID + "'></a>" +
                                            "</div>" +
                                        "</div>" +
                                    "</div></a>");

                        @*body.append(" <h4 class=\"small font-weight-bold\"><a href=\"@Url.Action("Detail", "Class")/" + item.ID + "\">"  +  item.Name + "</a><span class=\"float-right\">" + item.Progress + "%</span></h4>"+
                    "<div class=\"progress mb-4\">"+
                        "<div class=\"progress-bar\" role=\"progressbar\" style=\"width: " + item.Progress + "%\" aria-valuenow=\"" + item.Progress + "\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>"+
                    "</div>"
                        );*@
                    }
                }
            },
            error: function() {
                alert("Error");
            }
        });
    }

    function LoadTodayLesson() {
        $.ajax({
            type: "POST",
            url: '@Url.Action("GetTodayLessons", "LessonSchedule")',
            data: {date: $.datepicker.formatDate('mm-dd-yy', new Date())},
            dataType:"json",
            success: function (data) {
                var body = $('#tbTodayLesson tbody');
                body.html("");
                if (data.Data.length > 0)
                {
                    for (i = 0; i < data.Data.length; ++i) {
                        item = data.Data[i];
                        body.append("<tr><td colspan=\"2\">(" + item.SubjectName + ") <a href=\"@Url.Action("Detail", "Class")/" + item.ClassID + "\">"  +  item.ClassName + "</a></td></tr>" +
                            "<tr>" +
                                "<td>" + (i + 1) + "</td>" +
                                "<td><a class='links' href='@Url.Action("Detail", "Lesson")/" + item.ID + "/" + item.ClassID + "'>" + item.Title + "</a></td>" +
                            "</tr>");
                    }
                }
            },
            error: function() {
                alert("Error");
            }
        });
    }

    $(document).ready(function(){
        LoadMyClass();
        LoadTodayLesson();
    });
</script>

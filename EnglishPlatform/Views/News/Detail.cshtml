
@{
    var news = ViewBag.News as BaseCustomerEntity.Database.NewsEntity;
    ViewData["Title"] = news.Title;
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<section style="font-family:Open Sans">
    <div class="container">
        <div class="row form-group">
            <div class="inner-content">
                <div class="content-box">
                    <div class="box-title d-flex justify-content-center mb-5">
                        @news.Title
                        <div class="underline"></div>
                    </div> <div class="news-list flex-md-row pb-3"></div>
                </div>
            </div>
        </div>

        <div class="row form-group" ">
            <div class="col-md-2"></div>
            <div class="col-md-8 col-sm-12" id="content" style="color: #5f5f5f;font-family: auto;font-weight: bold;text-align:justify;font-size:26px">
                @news.Summary
            </div>
        </div>

        <div class="media-container-row row">
            <div class="col-md-2"></div>
            <div class="col-md-8 col-sm-12" id="content" style="text-align:justify">
                @Html.Raw(news.Content)
            </div>
        </div>

        @*<div class="row">
            <div class="col-sm-11"></div>
            <div class="col-sm-1">@news.PublishDate.ToString("dd-MM-yyyy")</div>
        </div>*@
    </div>
    <div class="row form-group">
        <div class="col-sm-12" style="text-align:center;font-family: Open Sans;    font-size: 30px;    font-weight: bold;">
            Những tin liên quan
        </div>

        <div class="col-sm-12">
            <div class="carousel-wrap" id="partner">
                <div class="owl-carousel">
                    <div class="item" v-for="img in items">
                        <a :href="'/tin-tuc/doi-tac/'+img.Code">
                            <img :src="'/Upload/News/'+img.Thumbnail" :title="img.Title">
                            <div class=" col-sm-12" style="position:absolute;bottom:0px;color:white;left:5px">
                                {{img.Title}}
                            </div>
                        </a>
                        @*<a :href="'/tin-tuc/doi-tac/'+img.Code" :title="img.Title">
                            <div class=" col-sm-12" style="position:absolute;bottom:0px;color:white;left:5px">
                                {{img.Title}}
                            </div>
                        </a>*@
                    </div>

                </div>
            </div>
        </div>

    </div>
</section>
<script>
    @if(news.Code == "ve-eduso")
    {
        @:$('.nav-link [for=aboutus]').addClass('active');
    }
    else
    {
        @:$('.nav-link [for=news]').addClass('active');
    }

    function getData() {
        $.ajax({
            url: '@Url.Action("getlist", "news")',
            type: "post",
            dataType: "json",
            data: { catID: '@news.CategoryID' },
            success: function (result) {

                new Vue({
                    el: '#partner',
                    data: {
                        items: result.Data
                    },
                    mounted() {
                        callCarousel()
                    }
                })
            }
        });
    }

        function callCarousel() {
            var $owl = $('.owl-carousel');
            $owl.trigger('destroy.owl.carousel');
            //debugger
            // After destory, the markup is still not the same with the initial.
            // The differences are:
            //   1. The initial content was wrapped by a 'div.owl-stage-outer';
            //   2. The '.owl-carousel' itself has an '.owl-loaded' class attached;
            //   We have to remove that before the new initialization.
            $owl.html($owl.find('.owl-stage-outer').html()).removeClass('owl-loaded');
            //debugger
            $owl.owlCarousel({
                // your initial option here, again.
                items: 4,
                loop: true,
                margin: 10,
                nav: true,
                navText: [
                    "<i class='fa fa-caret-left'></i>",
                    "<i class='fa fa-caret-right'></i>"
                ],
            });

            //$('.owl-carousel').owlCarousel({
            //    items: 4,
            //    loop: true,
            //    margin: 10,
            //    nav: true,
            //    navText: [
            //        "<i class='fa fa-caret-left'></i>",
            //        "<i class='fa fa-caret-right'></i>"
            //    ],
            //    //autoplay: true,
            //    //autoplayHoverPause: true,
            //})
        }

        $(document).ready(function ($) {
            getData();
        });
</script>
<style>
    .carousel-wrap {
        margin: auto;
        padding: 10px 6%;
        /*        width: 80%;*/
        position: relative;
    }

    /* fix blank or flashing items on carousel */
    /*.owl-carousel .item {
        position: relative;
        z-index: 100;
        -webkit-backface-visibility: hidden;
    }*/

    /* end fix */
    .owl-nav {
        position: absolute;
        top: 34%;
        width: 100%;
    }

        .owl-nav > div {
            margin-top: -26px;
            position: absolute;
            top: 50%;
            color: #cdcbcd;
        }

        .owl-nav i {
            font-size: 52px;
        }

        .owl-nav .owl-prev {
            left: -30px;
            position: absolute;
        }

        .owl-nav .owl-next {
            right: -30px;
            position: absolute
        }

    .owl-carousel .item:hover {
        cursor: pointer;
    }

    #content img{
        max-width:100%;
        max-height:100%;
    }

    .item {
        position: relative
    }

    .item a:hover{
        color:aqua
    }

</style>

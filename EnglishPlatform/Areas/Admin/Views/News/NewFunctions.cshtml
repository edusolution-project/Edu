@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    ViewData["Title"] = "Thông báo chức năng mới";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}
<script type="text/javascript" src="~/js/plugins/ck4/ckeditor.js"></script>

<div class="container-fluid" id="main_content">

    <div class="form-row">
        <div class="form-group col-sm-12">
            <button type="button" class="btn btn-outline-primary" disabled>Thư mới</button>
        </div>
    </div>

    @using (Html.BeginForm(FormMethod.Post, new { name = "FormControl" }))
    {
<form>
    <div class="form-row">
        <div class="form-group col-sm-12">
            <input name="Subject" id="Subject" class="form-control" placeholder="Chủ để" v-model="contentToSendMail.subject" required>
        </div>
    </div>

    <!--Chon mail-->
    <div class="form-row">
        <div class="form-group col-sm-2">Người nhận</div>
        <div class="form-group col-sm-10">
            <div class="form-row">
                <div class="form-group col-sm-12 row">
                    <div class="col-sm-2" style="margin:auto">
                        <button type="button" tabindex="-1" class="btn btn-default dropdown-toggle" v-on:click="toggleSelect(2)">Cơ sở<span class="caret"></span></button>
                    </div>
                    <div class="col-sm-10">
                        <input type="text" class="form-control " disabled />
                    </div>
                    <div class="col-md-10" style="position:absolute;right:0;top:40px;z-index:2" v-if="displaySelectCenters">
                        <div id="selectMailinCenters">
                            <ul class="classSelect" role="menu" style="overflow-y:auto; height:150px; list-style:none; padding: 7px; border: solid 1px #CCC; background: #FFF;">
                                <li>
                                    <a>
                                        <input type="checkbox" /><span class="lbl"> Chọn tất cả </span>
                                    </a>
                                </li>
                                @*<li v-for="(item,k) in list_centers">
                                        <a>
                                            <input type="checkbox" :value="item.ID" v-model="addItem.TargetCenters" /><span class="lbl"> {{item.Name}} </span>
                                        </a>
                                    </li>*@
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-sm-12 row">
                    <div class="col-sm-2" style="margin:auto">
                        <button type="button" tabindex="-1" class="btn btn-default dropdown-toggle" v-on:click="toggleSelect(1)">Cc<span class="caret"></span></button>
                    </div>
                    <div class="col-sm-10">
                        <input type="text" class="form-control " disabled />
                    </div>
                    <div class="col-md-10" style="position:absolute;right:0;top:40px;z-index:2" v-if="displaySelectCc">
                        <div id="selectMailtoCc">
                            <ul class="classSelect" role="menu" style="overflow-y:auto; height:150px; list-style:none; padding: 7px; border: solid 1px #CCC; background: #FFF;">
                                <li>
                                    <a>
                                        <input type="checkbox" /><span class="lbl"> Chọn tất cả </span>
                                    </a>
                                </li>
                                @*<li v-for="(item,k) in list_centers">
                                        <a>
                                            <input type="checkbox" :value="item.ID" v-model="addItem.TargetCenters" /><span class="lbl"> {{item.Name}} </span>
                                        </a>
                                    </li>*@
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-sm-12 row">
                    <div class="col-sm-2" style="margin:auto">
                        <button type="button" tabindex="-1" class="btn btn-default dropdown-toggle" v-on:click="toggleSelect(0)">Bcc<span class="caret"></span></button>
                    </div>
                    <div class="col-sm-10">
                        <input type="text" class="form-control " disabled />
                    </div>
                    <div class="col-md-10" style="position:absolute;right:0;top:40px;z-index:2" v-if="displaySelectBcc">
                        <div id="selectMailtoBcc">
                            <ul class="classSelect" role="menu" style="overflow-y:auto; height:150px; list-style:none; padding: 7px; border: solid 1px #CCC; background: #FFF;">
                                <li>
                                    <a>
                                        <input type="checkbox" /><span class="lbl"> Chọn tất cả </span>
                                    </a>
                                </li>
                                @*<li v-for="(item,k) in list_centers">
                                        <a>
                                            <input type="checkbox" :value="item.ID" v-model="addItem.TargetCenters" /><span class="lbl"> {{item.Name}} </span>
                                        </a>
                                    </li>*@
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--Viet noi dung-->
    <div class="form-row">
        <div class="form-group col-sm-12">
            <textarea name="Content" id="Content" class="form-control" required></textarea>
        </div>
    </div>

    <div class="form-group">
        <div class="form-group col-sm-12">
            <input type="file" class="custom-file-input" id="validatedCustomFile" accept="video/*" required>
            <label class="custom-file-label" for="validatedCustomFile">Chọn video hướng dẫn chức năng mới</label>
        </div>
    </div>

    <div class="form-row">
        @*<div class="form-group col-sm-10"></div>*@
        <div class="form-group col-sm-12" style="text-align:center">
            <button type="button" class="btn btn-outline-success" v-on:click="SendMail()">Gửi</button>
        </div>
    </div>
</form>
    }
</div>

<script>
    new Vue({
        el: "#main_content",
        mounted() {
            CKEDITOR.replace("Content");
        },
        components: {},
        data: {
            displaySelectCc: false,
            displaySelectBcc: false,
            displaySelectCenters: false,
            listMailtoCc: [],
            listMailtoBcc: [],
            emails: [],
            contentToSendMail: {
                subject: "",
                toMailsCc: [],
                toMailsBcc: [],
                content:""
            }
        },
        computed: {},
        watch: {},
        methods: {
            toggleSelect(st = 0) {
                if (st == 0) { //chon Bcc
                    this.displaySelectBcc = !this.displaySelectBcc
                    this.displaySelectCc = false;
                    this.displaySelectCenters = false;
                }
                else if (st == 1) { //Chon Cc
                    this.displaySelectCc = !this.displaySelectCc
                    this.displaySelectBcc = false;
                    this.displaySelectCenters = false;
                }
                else if (st == 2) { //Chon Center
                    this.displaySelectCenters = !this.displaySelectCenters;
                    this.displaySelectBcc = false;
                    this.displaySelectCc = false;
                }
                else {
                    this.displaySelectCenters = false;
                    this.displaySelectCc = false;
                    this.displaySelectBcc = false;
                }
            },
            SendMail() {
                let _that = this;
                let _form = new FormData()

                _form.append('Subject', _that.contentToSendMail.subject)
                //alert("Gửi Mail thành công" + _that.contentToSendMail.subject);
            }
        }
    });
</script>